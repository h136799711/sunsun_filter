{"version":3,"sources":["common.jsx"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["const { address_json: option } = mengwu;\r\nconst { Modal,Cascader,Input,Checkbox,message,Spin,Select } = antd;\r\nconst Address = function(){\r\n    let list = this.state.data.map(function(val){\r\n        let cl = val.selected==true ? \"address-list selected\" : \"address-list\";\r\n        let data = {};\r\n        _.assign(data, val);\r\n        return(\r\n            <li className={cl} onClick={()=>this.selectAddress(data.id)}>\r\n                <div>\r\n                    <p><em>{val.address}</em> ({val.contactname} 收) <span>默认</span></p>\r\n                    <p>{val.detail}</p>\r\n                    <p>{val.phone}</p>\r\n                    <p><a href=\"javascript:void(0);\" onClick={()=>this.edit_address(data)}>修改</a></p>\r\n                </div>\r\n            </li>\r\n        );\r\n    }.bind(this));\r\n    return(\r\n        <div className=\"address-wrap\">\r\n            <ul>\r\n                {list}\r\n            </ul>\r\n            <a className=\"btn add-address\" href=\"javascript:void(0);\" onClick={this.addressAdd}>使用新地址</a>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Order_Items = function(){\r\n    let sp_url_pre = getBaseUrl() + '/mengwu/spdetail/index/id/';\r\n    let list = order_items.map(function(val){\r\n        return(\r\n            <tr className=\"order-item\">\r\n                <td>\r\n                    <div className=\"item-info\">\r\n                        <div className=\"sp-img\">\r\n                            <a href={sp_url_pre+val.p_id} target=\"_blank\"><img src={val.icon_url}/></a>\r\n                        </div>\r\n                        <div className=\"introduce\">\r\n                            <div className=\"caption\">\r\n                                <a href={sp_url_pre+val.p_id} target=\"_blank\">{val.name}</a>\r\n                            </div>\r\n                            <div className=\"sorted\"><span>{val.sku_desc}</span></div>\r\n                        </div>\r\n                    </div>\r\n                </td>\r\n                <td style={{textAlign: \"center\"}}>{val.price}</td>\r\n                <td style={{textAlign: \"center\"}}>{val.count}</td>\r\n                <td style={{textAlign: \"center\"}}>{val.price *100 * val.count /100}</td>\r\n            </tr>\r\n        );\r\n    });\r\n    return(\r\n        <div className=\"order-items\">\r\n            <table width=\"100%\">\r\n                <thead>\r\n                <tr>\r\n                    <th width=\"48%\"><span>商品信息</span></th>\r\n                    <th width=\"12%\"><span>单价（元）</span></th>\r\n                    <th width=\"12%\"><span>数量</span></th>\r\n                    <th width=\"28%\"><span>小计（元）</span></th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {list}\r\n                </tbody>\r\n            </table>\r\n            <div className=\"note\">\r\n                <span>给卖家留言:</span><input type=\"text\" name=\"note\" value={this.state.note} onChange={this.noteOnChange} placeholder=\"选填\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Pay_type = function(){\r\n    let items = order_items;\r\n    let total_price = this.calcTotalPrice();\r\n    const pay_type = ['zhifubao','weixin','caifutong'];\r\n    const pay_type_input = pay_type.map((val,index)=>\r\n        <div className=\"other-type-group\"><label className={val!='zhifubao' ? 'disabled' : null}><input type=\"radio\" name=\"other-pay\" checked={this.state.other_pay_type==index?'checked':null} disabled={val!='zhifubao' ? 'disabled' : null} onChange={()=>this.onChangePayType(index)} /><div className={val}></div></label></div>\r\n    );\r\n    return (\r\n        <div className=\"pay-order\">\r\n            <div className=\"pay-type\">\r\n                <div className=\"caption\">\r\n                    选择支付方式支付<em>{total_price}</em>元\r\n                </div>\r\n                {this.state.balance>0?[\r\n                    <div className=\"type\">\r\n                        <label><input type=\"checkbox\" name=\"use_balance\" checked={this.state.use_balance ? \"checked\" : null} onClick={this.onChangeUseBalance} />使用账户余额{this.state.balance}元</label>\r\n                        {total_price > this.state.balance && this.state.use_balance ? [\r\n                            <div className=\"detail\">\r\n                                <span className=\"tip\">您的余额不足，请选择其他方式支付剩余部分</span>\r\n                            </div>\r\n                        ]:null}\r\n                    </div>\r\n                ]:null}\r\n                {total_price <= this.state.balance && this.state.use_balance || isNaN(total_price) ? null : [\r\n                    <div className=\"type\">\r\n                        <div className=\"detail\">\r\n                            {pay_type_input}\r\n                        </div>\r\n                    </div>\r\n                ]}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Add_address = function(){\r\n    let data = this.state.address;\r\n    let tip = \"添加新的收货地址\";\r\n    if(typeof(data.id)!='undefined'){\r\n        tip = \"修改收货地址\";\r\n    }\r\n    return(\r\n        <Modal title={tip} visible={this.state.add_modal} onOk={this.add_modal_ok} onCancel={this.add_modal_cancel}>\r\n            <div className=\"address-form\">\r\n                <div className=\"tip\"><span>均为必填项</span></div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"l\">\r\n                        <label>所在地区*</label>\r\n                    </div>\r\n                    <div className=\"r\">\r\n                        <Cascader options={option} style={{width: 300}} placeholder=\"请选择地区\" value={data.addressid} onChange={this.addressOnChange} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"l\">\r\n                        <label>详细地址*</label>\r\n                    </div>\r\n                    <div className=\"r\">\r\n                        <textarea placeholder=\"建议您填写详细收货地址，例如街道名称，门牌号码，楼层和房间号等信息\" value={data.detail} onChange={this.detailOnChange} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"l\">\r\n                        <label>邮政编码*</label>\r\n                    </div>\r\n                    <div className=\"r\">\r\n                        <Input placeholder=\"如您不清楚邮递区号，请填写000000\" style={{width:250}} value={data.postcode} onChange={this.postcodeOnChange} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"l\">\r\n                        <label>收货人姓名*</label>\r\n                    </div>\r\n                    <div className=\"r\">\r\n                        <Input placeholder=\"长度不超过25个字符\" style={{width:250}} value={data.contactname} onChange={this.contactnameOnChange} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"l\">\r\n                        <label>手机号码*</label>\r\n                    </div>\r\n                    <div className=\"r\">\r\n                        <Input placeholder=\"请填写手机号码\" style={{width:250}} value={data.phone} onChange={this.phoneOnChange} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <div className=\"l\"></div>\r\n                    <div className=\"r\">\r\n                        <Checkbox defaultChecked={false} checked={data.checked} onChange={this.checkOnChange} >设置为默认地址</Checkbox>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nconst Total_detail = function(){\r\n    let discount = 0; //优惠\r\n    let total_price = this.calcTotalPrice();\r\n    let order_price = this.calcOrPrice();\r\n    const { redEnvelope, coupon} = this.state;\r\n    let coupon_options = [<Option value=\"0\">不使用优惠券</Option>];\r\n    coupon.forEach(function(val){\r\n        if(order_price>=val.use_condition){\r\n            coupon_options.push(\r\n                <Option value={val.id}>{val.name}</Option>\r\n            );\r\n        }\r\n    });\r\n    let redEnvelope_options = [<Option value=\"0\">不使用红包</Option>];\r\n    redEnvelope.forEach(function(val){\r\n        if(order_price>=val.use_condition){\r\n            redEnvelope_options.push(\r\n                <Option value={val.id}>{val.name}</Option>\r\n            );\r\n        }\r\n    });\r\n    let store_youhui = this.state.store_youhui;\r\n    let youhui = this.state.youhui;\r\n    return(\r\n        <div>\r\n            <div className=\"youhui\">\r\n                <div className=\"youhui-group\">\r\n                    <div className=\"fl\">\r\n                        <label>使用优惠券：</label><Select defaultValue=\"不使用优惠券\" onChange={this.onChangeCoupon} style={{ width: 150 }}>{coupon_options}</Select>\r\n                    </div>\r\n                    <div className=\"youhui-discount fr\">-{youhui.coupon}</div>\r\n                </div>\r\n                <div className=\"youhui-group\">\r\n                    <div className=\"fl\">\r\n                        <label>使用红包：</label><Select defaultValue=\"不使用红包\" onChange={this.onChangeRedEnvelope} style={{ width: 150 }}>{redEnvelope_options}</Select>\r\n                    </div>\r\n                    <div className=\"youhui-discount fr\">-{youhui.redEnvelope}</div>\r\n                </div>\r\n                <div className=\"youhui-group\">\r\n                    <div className=\"fl\">\r\n                        <label>店铺优惠：</label>\r\n                    </div>\r\n                    <div className=\"youhui-discount fr\">-{store_youhui.discount_money}{store_youhui.free_shipping?'(包邮)':null}</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"order-total\">\r\n                <div className=\"fr\">\r\n                    <dl>\r\n                        <dt>运费：</dt>\r\n                        <dd>{store_youhui.free_shipping?this.state.freight_cost:'包邮'}</dd>\r\n                    </dl>\r\n                    <dl>\r\n                        <dt>优惠：</dt>\r\n                        <dd>{this.state.total_youhui}</dd>\r\n                    </dl>\r\n                    <dl className=\"total-price\">\r\n                        <dt>订单总价：</dt>\r\n                        <dd>{total_price}</dd>\r\n                    </dl>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Confirm = React.createClass({\r\n    getDefaultProps(){\r\n        return({data: []});\r\n    },\r\n    getInitialState(){\r\n        let data = this.props.data;\r\n        return({address: {},data: data, add_modal:false, pay_confirm_modal:false, note:\"\", freight_cost: 0,\r\n            use_balance: true, balance: wallet, //余额\r\n            other_pay_type: 0,//其他支付方式：0支付宝 1微信 2财付通\r\n            redEnvelope: [], //红包\r\n            coupon: [], //优惠券\r\n            youhui: {coupon:0,coupon_id:0, redEnvelope:0,redEnvelope_id:0},\r\n            total_youhui: 0,\r\n            store_youhui: { //店铺优惠\r\n                discount_money:0,\r\n                free_shipping:false\r\n            }\r\n        });\r\n    },\r\n    calcTotalYouhui(){\r\n        //计算优惠\r\n        let total_price = this.calcTotalPrice();\r\n        if(isNaN(total_price)) return;\r\n\r\n        //计算总价\r\n        let or_price = this.calcOrPrice();\r\n\r\n        let youhui = this.state.youhui;\r\n\r\n        let store_youhui = this.state.store_youhui; //店铺优惠\r\n        const store_info = order_info.store_info;\r\n        let time = Date.parse(new Date());\r\n        if(parseInt(store_info.start_time)*1000<=time && time<=parseInt(store_info.end_time)*1000){\r\n            if(or_price >=parseFloat(store_info.condition)){\r\n                store_youhui.discount_money = parseFloat(store_info.discount_money)>0?parseFloat(store_info.discount_money):0;\r\n                if(parseInt(store_info.free_shipping)){\r\n                    //包邮;\r\n                    store_youhui.free_shipping = true;\r\n                    this.setState({freight_cost: 0});\r\n                }\r\n                this.setState({store_youhui});\r\n            }\r\n        }\r\n        let total_youhui = store_youhui.discount_money + youhui.coupon + youhui.redEnvelope;\r\n        this.setState({total_youhui});\r\n    },\r\n    calcTotalPrice(){\r\n        //计算总价\r\n        let freight_cost = this.state.freight_cost;\r\n        if(isNaN(freight_cost)) return \"计算中...\";\r\n\r\n        let or_price = this.calcOrPrice();\r\n\r\n        let youhui = this.state.youhui;\r\n\r\n        let store_youhui = this.state.store_youhui; //店铺优惠\r\n\r\n        let total_youhui = store_youhui.discount_money + youhui.coupon + youhui.redEnvelope;\r\n        let total_price = or_price + freight_cost - total_youhui;\r\n\r\n        if(total_price < 0)total_price = 0.01;\r\n\r\n        return total_price;\r\n    },\r\n    calcOrPrice(){\r\n        //计算订单原价\r\n        let or_price = 0;\r\n        order_items.forEach(function(val){\r\n            let discount = 0; //优惠\r\n            or_price += val.price * 100 * val.count -discount*100;\r\n        });\r\n        or_price = or_price / 100;\r\n        return or_price;\r\n    },\r\n    addressOnChange(value, selectedOptions){\r\n        let data = this.state.address;\r\n        data.addressid = value;\r\n        data.address = selectedOptions.map(function(val){\r\n            return val.label;\r\n        });\r\n        this.onEdit(data);\r\n    },\r\n    detailOnChange(event){\r\n        let data = this.state.address;\r\n        data.detail = event.target.value;\r\n        this.onEdit(data);\r\n    },\r\n    postcodeOnChange(event){\r\n        let data = this.state.address;\r\n        data.postcode = event.target.value;\r\n        this.onEdit(data);\r\n    },\r\n    contactnameOnChange(event){\r\n        let data = this.state.address;\r\n        data.contactname = event.target.value.substr(0,25);\r\n        this.onEdit(data);\r\n    },\r\n    phoneOnChange(event){\r\n        if(!isNaN(event.target.value)){\r\n            //手机号只能输入数字\r\n            let data = this.state.address;\r\n            data.phone = event.target.value;\r\n            this.onEdit(data);\r\n        }\r\n    },\r\n    checkOnChange(event){\r\n        let data = this.state.address;\r\n        data.checked = event.target.checked;\r\n        this.onEdit(data);\r\n    },\r\n    onEdit(data){\r\n        this.setState({address: data});\r\n    },\r\n    noteOnChange(event){\r\n        let note = this.state.note;\r\n        note = event.target.value;\r\n        this.setState({note: note});\r\n    },\r\n    componentDidMount(){\r\n\r\n        this.update();\r\n        this.calcTotalYouhui();\r\n    },\r\n    update(){\r\n        this.setState({loading: true});\r\n        let url = getBaseUrl() + '/mengwu/mengwuApi/address_query';\r\n        let data = {};\r\n        _post(url,jQuery.param(data),{data_back: this.update_response});\r\n\r\n        this.getCoupon();\r\n        this.getRedEnvelope();\r\n    },\r\n    getCoupon(){\r\n        //获取优惠券\r\n        let url = getBaseUrl() + '/mengwu/mengwuApi/coupon_query';\r\n\r\n        let data = {\r\n            is_use: 0,\r\n            is_expire: 0\r\n        };\r\n\r\n        _post(url,jQuery.param(data),{data_back: function(data){\r\n            if(data.status){\r\n                this.setState({coupon: data.info});\r\n            }else{\r\n                if(typeof data.info.redirect !=\"undefined\"){\r\n                    window.location.href = data.info.redirect;\r\n                }else{\r\n                    message.error(data.info);\r\n                    this.setState({loading: false});\r\n                }\r\n            }\r\n\r\n        }.bind(this)});\r\n    },\r\n    getRedEnvelope(){\r\n        //获取红包\r\n        let url = getBaseUrl() + '/mengwu/mengwuApi/redEnvelope_query';\r\n\r\n        let data = {\r\n            is_use: 0,\r\n            is_expire: 0\r\n        };\r\n\r\n        _post(url,jQuery.param(data),{data_back: function(data){\r\n            if(data.status){\r\n                this.setState({redEnvelope: data.info});\r\n            }else{\r\n                if(typeof data.info.redirect !=\"undefined\"){\r\n                    window.location.href = data.info.redirect;\r\n                }else{\r\n                    message.error(data.info);\r\n                    this.setState({loading: false});\r\n                }\r\n            }\r\n\r\n        }.bind(this)});\r\n        \r\n    },\r\n    onChangeCoupon(value){\r\n        if(value==0){\r\n            let youhui = this.state.youhui;\r\n            youhui.coupon = 0;\r\n            youhui.coupon_id = 0;\r\n            this.setState({youhui});\r\n            this.calcTotalYouhui();\r\n            return;\r\n        }\r\n        const coupon = _.find(this.state.coupon,['id',value]);\r\n        if(coupon){\r\n            let youhui = this.state.youhui;\r\n            youhui.coupon = parseFloat(coupon.money) > 0 ? parseFloat(coupon.money) : 0;\r\n            youhui.coupon_id = value;\r\n            this.setState({youhui});\r\n            this.calcTotalYouhui();\r\n        }\r\n    },\r\n    onChangeRedEnvelope(value){\r\n        if(value==0){\r\n            let youhui = this.state.youhui;\r\n            youhui.redEnvelope = 0;\r\n            youhui.redEnvelope_id = 0;\r\n            this.setState({youhui});\r\n            this.calcTotalYouhui();\r\n            return;\r\n        }\r\n        const redEnvelope = _.find(this.state.redEnvelope,['id',value]);\r\n        if(redEnvelope){\r\n            let youhui = this.state.youhui;\r\n            youhui.redEnvelope = parseFloat(redEnvelope.money) > 0 ? parseFloat(redEnvelope.money) : 0;\r\n            youhui.redEnvelope_id = value;\r\n            this.setState({youhui});\r\n            this.calcTotalYouhui();\r\n        }\r\n    },\r\n    update_response(data){\r\n        this.setState({loading: false});\r\n        if(data.status){\r\n            let address = data.info;\r\n            let d = false;\r\n            address.forEach(function(val,index){\r\n                if(val.default == 1){\r\n                    d = true;\r\n                    val.selected = true;\r\n                    address.splice(index,1);\r\n                    address.splice(0,0,val);\r\n                }\r\n            });\r\n            if(!d && address.length>0) address[0].selected = true;\r\n            this.setState({data: address});\r\n            this.calcFreightFee();\r\n        }else{\r\n            this.jump(data);\r\n        }\r\n    },\r\n    jump(data){\r\n        if(typeof data.info.redirect !=\"undefined\"){\r\n            message.error(data.info.info);\r\n            setTimeout(function(){\r\n                window.location.href = data.info.redirect;\r\n            },1000);\r\n        }\r\n    },\r\n    addressAdd(){\r\n        this.setState({address: {detail:\"\"},add_modal: true});\r\n    },\r\n    add_modal_ok(){\r\n        let address = this.state.address;\r\n        if(typeof address.addressid == 'undefined' || address.addressid.length == 0){\r\n            message.error('请选择所在地区');\r\n            return;\r\n        }\r\n        if(typeof address.detail == 'undefined' || address.detail == \"\"){\r\n            message.error('请填写详细地址');\r\n            return;\r\n        }\r\n        if(typeof address.postcode == 'undefined' || address.postcode == \"\"){\r\n            message.error('请填写邮政编码');\r\n            return;\r\n        }\r\n        if(typeof address.contactname == 'undefined' || address.contactname == \"\"){\r\n            message.error('请填写收货人姓名');\r\n            return;\r\n        }\r\n        if(typeof address.phone == 'undefined' || address.phone == \"\"){\r\n            message.error('请填写手机号码');\r\n            return;\r\n        }\r\n\r\n        let data = {\r\n            detailinfo: typeof address.detail == 'undefined' ? \"\" : address.detail,\r\n            contactname: address.contactname,\r\n            mobile: address.phone,\r\n            postal_code: address.postcode,\r\n            default: typeof address.checked == 'undefined' || address.checked == false ? 0 : 1\r\n        };\r\n\r\n        address.addressid.forEach(function(val,index){\r\n\r\n            switch (index){\r\n                case 0:\r\n                    data.province = address.address[0];\r\n                    data.provinceid = val;\r\n                    break;\r\n                case 1:\r\n                    data.city = address.address[1];\r\n                    data.cityid = val;\r\n                    break;\r\n                case 2:\r\n                    data.area = address.address[2];\r\n                    data.areaid = val;\r\n                    break;\r\n            }\r\n\r\n        });\r\n\r\n        this.setState({add_modal: false, loading: true});\r\n        let url = getBaseUrl();\r\n\r\n        if(typeof address.id !='undefined'){\r\n            //编辑地址\r\n            data.id = address.id;\r\n            url += '/mengwu/mengwuApi/address_update';\r\n        }else{\r\n            //添加新地址\r\n            url += '/mengwu/mengwuApi/address_add';\r\n        }\r\n\r\n        _post(url,jQuery.param(data),{data_back: this.save_response});\r\n    },\r\n    save_response(data){\r\n        if(data.status){\r\n            this.update();\r\n        }else{\r\n            this.jump(data);\r\n            message.error('保存失败');\r\n            this.setState({loading: false});\r\n        }\r\n    },\r\n    add_modal_cancel(){\r\n        this.setState({add_modal: false});\r\n    },\r\n    edit_address(data){\r\n        if(typeof data.id == \"undefined\"){\r\n            message.error(\"地址数据异常,无法编辑，请刷新后重试！\");\r\n            return;\r\n        }\r\n        if(data.default==1) data.checked = true;\r\n        this.setState({address: data, add_modal: true});\r\n    },\r\n    selectAddress(id){\r\n        let c = false;\r\n        let data = this.state.data.map(function(val){\r\n            if(val.id == id){\r\n                if(!val.selected) c = true;\r\n                val.selected = true;\r\n            }else{\r\n                val.selected = false;\r\n            }\r\n            return val;\r\n        });\r\n        if(c){\r\n            this.setState({data: data});\r\n            this.calcFreightFee();\r\n        }\r\n    },\r\n    calcFreightFee(){\r\n        //计算运费\r\n        let from = order_info.from ? order_info.from : 'unknown';\r\n        if(from=='unknown'){\r\n            console.log('运费计算失败');\r\n            return;\r\n        }\r\n        this.setState({freight_cost: '计算中...'});\r\n        let url = getBaseUrl() + '/mengwu/mengwuApi/order_freight_cost';\r\n        let address_id = 0;\r\n        let cart_ids = [];\r\n        this.state.data.forEach(function(val){\r\n            if(val.selected) address_id = val.id;\r\n        });\r\n        if(address_id ==0){\r\n            console.log('请选择地址');\r\n        }\r\n        cart_ids = order_items.map(function(val){\r\n            return val.id;\r\n        });\r\n\r\n        let data = {\r\n            from: from,\r\n            address_id: address_id\r\n        };\r\n        if(from == 'spcart'){\r\n            data.cart_ids = cart_ids.join(',');\r\n        }\r\n        if(from == 'buy'){\r\n            if(!order_info.order_items || !order_info.order_items[0]){\r\n                console.log('运费计算失败,商品信息不存在');\r\n                this.setState({freight_cost: 0});\r\n                return;\r\n            }\r\n            data.pid = order_info.order_items[0].p_id;\r\n            data.count = order_info.order_items[0].count;\r\n        }\r\n\r\n        _post(url,jQuery.param(data),{data_back: this.calcFreightFee_res});\r\n\r\n    },\r\n    calcFreightFee_res(data){\r\n        if(data.status){\r\n            this.setState({freight_cost: parseFloat(data.info)});\r\n        }else{\r\n            this.jump(data);\r\n        }\r\n    },\r\n    onChangeUseBalance(event){\r\n        this.setState({use_balance: event.target.checked})\r\n    },\r\n    onChangePayType(type){\r\n        //支付方式改变\r\n        this.setState({other_pay_type: type});\r\n    },\r\n    confirmAndPay(){\r\n        //生成订单\r\n        let url = getBaseUrl() + '/mengwu/order/order_add';\r\n        let note = this.state.note;\r\n        let address_id = 0;\r\n        let cart_ids = [];\r\n        let youhui = this.state.youhui;\r\n        let money = 0;\r\n        let balance = this.state.balance > 0 ? this.state.balance : 0;\r\n        let total_price = this.calcTotalPrice();\r\n        if(isNaN(total_price)){\r\n            message.error('请稍等~~');\r\n            return;\r\n        }\r\n        cart_ids = order_items.map(function(val){\r\n            return val.id;\r\n        });\r\n        this.state.data.forEach(function(val){\r\n            if(val.selected) address_id = val.id;\r\n        });\r\n        if(address_id ==0){\r\n            message.error('请选择收货地址！');\r\n            return;\r\n        }\r\n\r\n        this.setState({loading: true});\r\n\r\n        if(this.state.use_balance){\r\n            if(balance >= total_price){\r\n                money = total_price;\r\n            }else{\r\n                money = balance;\r\n            }\r\n        }\r\n\r\n        let data = {\r\n            note: note,\r\n            address_id : address_id,\r\n            coupon_id: youhui.coupon_id,\r\n            red_id: youhui.redEnvelope_id,\r\n            data: JSON.stringify(order_info),\r\n            money: money\r\n        };\r\n        \r\n        _post(url,jQuery.param(data),{data_back: this.orderAdd_res});\r\n        \r\n    },\r\n    orderAdd_res(data){\r\n        if(data.status){\r\n            if(data.info.total_price>0){\r\n                //打开新窗口支付\r\n                this.setState({loading: false, pay_confirm_modal: true,pay_info: data.info});\r\n                console.log('打开新窗口支付');\r\n                let form = $('<form></form>');\r\n                let action = getBaseUrl() + '/mengwu/order/jump2Pay';\r\n                form.attr({action:action,method:'post',target:'_blank'});\r\n                let pay_info_input = $('<input type=\"text\" name=\"pay_info\" />');\r\n                pay_info_input.attr('value',JSON.stringify(data.info));\r\n                let type_input = $('<input type=\"text\" name=\"type\" />');\r\n                type_input.attr('value',this.other_pay_type);\r\n                form.append(pay_info_input,type_input);\r\n                $('body').append(form);\r\n                form.submit().remove();\r\n            }else{\r\n                this.jump_order_detail();\r\n            }\r\n            \r\n        }else{\r\n            this.jump(data);\r\n            message.error(data.info);\r\n            this.setState({loading: false});\r\n        }\r\n    },\r\n    confirmPay(){\r\n        let pay_info = this.state.pay_info;\r\n        let form = $('<form></form>');\r\n        let action = getBaseUrl() + '/mengwu/order/jump2Pay';\r\n        form.attr({action:action,method:'post',target:'_blank'});\r\n        let pay_info_input = $('<input type=\"text\" name=\"pay_info\" />');\r\n        pay_info_input.attr('value',JSON.stringify(pay_info));\r\n        let type_input = $('<input type=\"text\" name=\"type\" />');\r\n        type_input.attr('value',this.other_pay_type);\r\n        form.append(pay_info_input,type_input);\r\n        $('body').append(form);\r\n        form.submit().remove();\r\n    },\r\n    jump_order_detail(){\r\n        window.location.href = getBaseUrl() + '/mengwu/user/order';\r\n    },\r\n\r\n    render(){\r\n        let address_url = getBaseUrl() + '/mengwu/user/address';\r\n        let add = Add_address.bind(this)();\r\n        let address_list = Address.bind(this)();\r\n        let pay_type = Pay_type.bind(this)();\r\n        let items = Order_Items.bind(this)();\r\n        let total_detail = Total_detail.bind(this)();\r\n        let selected_addr = {};\r\n        let total_price = this.calcTotalPrice();\r\n        let balance = this.state.balance; //余额\r\n        this.state.data.forEach(function(val){\r\n            if(val.selected) selected_addr = val;\r\n        });\r\n        const pay_type_desc = ['支付宝','微信','财付通'];\r\n        let pay_desc = '';\r\n        if(this.state.use_balance && total_price<=balance){\r\n            pay_desc = '使用余额支付';\r\n        }else{\r\n            pay_desc = \"使用\"+pay_type_desc[this.state.other_pay_type]+'支付';\r\n        }\r\n\r\n        return(\r\n            <Spin spinning={this.state.loading}>\r\n                {add}\r\n                <div className=\"top\">\r\n                    <h1>确认订单</h1>\r\n                    <div className=\"progress\"></div>\r\n                </div>\r\n                <div className=\"confirm-inner\">\r\n                    <div className=\"step\">\r\n                        <h4>选择收货地址</h4> <a href={address_url} target=\"_blank\">管理收货地址</a>\r\n                    </div>\r\n                    {address_list}\r\n                    <div className=\"step nob\">\r\n                        <h4>确认订单信息</h4>\r\n                    </div>\r\n                    {items}\r\n                    {total_detail}\r\n                    <div className=\"step\">\r\n                        <h4>选择支付方式</h4>\r\n                    </div>\r\n                    {pay_type}\r\n                    <div className=\"confirm-info-wrap\">\r\n                        <div className=\"confirm-info\">\r\n                            <p>{pay_desc}<em>{total_price}</em>元</p>\r\n                            <p>寄送至：<span>{selected_addr.address} {selected_addr.detail}</span></p>\r\n                            <p>收货人：<span>{selected_addr.contactname} {selected_addr.phone}</span></p>\r\n                        </div>\r\n                    </div>\r\n                    <Modal title=\"确认支付\" visible={this.state.pay_confirm_modal} okText=\"已支付\" cancelText=\"前往支付\" closable={false} style={{top: 300}} onOk={this.jump_order_detail} onCancel={this.confirmPay}>\r\n                        <p>请在新打开的页面中完成支付</p>\r\n                        <p>1.如果没有跳出新窗口，请检查浏览器是否允许弹出新窗口</p>\r\n                        <p>2.点击前往支付可重新支付</p>\r\n                    </Modal>\r\n                    <div className=\"oper-btn clear text-right\">\r\n                        <a href=\"javascript:void(0);\" className=\"btn btn-confirm\" onClick={this.confirmAndPay}>确认并支付</a>\r\n                    </div>\r\n                </div>\r\n            </Spin>\r\n        );\r\n    }\r\n    \r\n});\r\n\r\nReactDOM.render(\r\n    <Confirm />,\r\n    document.getElementById('order-confirm')\r\n);"]}